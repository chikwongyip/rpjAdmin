(function(){"use strict";var e={4231:function(e,t,a){var i=a(7195),r=a(5114),o=a.n(r),s=a(2241),l=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},n=[],d={name:"App"},m=d,c=a(1001),p=(0,c.Z)(m,l,n,!1,null,null,null),u=p.exports,h=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login-container"},[t("el-card",[t("h1",{staticClass:"title"},[e._v("广州瑞谱佳后台登录系统")]),t("el-form",{ref:"form",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.rules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"username",prop:"email"}},[t("el-input",{attrs:{type:"username"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),t("el-form-item",{attrs:{label:"Password",prop:"password"}},[t("el-input",{attrs:{type:"password"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("Submit")])],1)],1)],1)],1)},g=[],f=(a(7658),a(306));let b="http://120.77.25.98:8000/api";const _={Accept:"application/json","Content-Type":"application/json"},y=e=>f.Z.post(`${b}/user/login`,e,{header:_});var v={data(){return{loginForm:{username:"",password:""},rules:{username:[{required:!0,message:"Please enter your username",trigger:"blur"}],password:[{required:!0,message:"Please enter your password",trigger:"blur"},{min:3,message:"Password length should be at least 6 characters",trigger:"blur"}]}}},methods:{handleSubmit(){this.$refs.form.validate((e=>{if(e){let e=this.loginForm;y(e).then((e=>{0===e.data.errno?(localStorage.token=e.data.data.token,this.$cookies.set("username",this.loginForm.username,{expires:"1d",path:"/"}),this.$router.push("/admin")):-1===e.data.errno&&this.$message({message:e.data.message,type:"error"})})).catch((e=>{this.$message({message:"登录失败！"+e,type:"error"})}))}}))}},mounted(){const e=this.$cookies.get("username");e&&this.$router.push("/admin")}},F=v,w=(0,c.Z)(F,h,g,!1,null,"4bbf22a1",null),C=w.exports,$=function(){var e=this,t=e._self._c;return t("el-container",{staticStyle:{height:"800px",border:"1px solid #eee"}},[t("el-aside",{staticStyle:{"background-color":"rgb(238, 241, 246)"},attrs:{width:"200px"}},[t("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":e.$route.path,router:""},on:{select:e.handleMenuSelect}},[t("el-menu-item",{attrs:{index:"/admin/company"}},[t("i",{staticClass:"el-icon-menu"}),t("span",{attrs:{slot:"title"},slot:"title"},[e._v("Company")])]),t("el-menu-item",{attrs:{index:"/admin/brand"}},[t("i",{staticClass:"el-icon-menu"}),t("span",{attrs:{slot:"title"},slot:"title"},[e._v("Brand")])]),t("el-menu-item",{attrs:{index:"/admin/category"}},[t("i",{staticClass:"el-icon-menu"}),t("span",{attrs:{slot:"title"},slot:"title"},[e._v("Category")])]),t("el-menu-item",{attrs:{index:"/admin/product"}},[t("i",{staticClass:"el-icon-menu"}),t("span",{attrs:{slot:"title"},slot:"title"},[e._v("Product")])])],1)],1),t("el-container",[t("el-header",{staticClass:"header"},[t("div",[t("el-image",{staticStyle:{width:"200px",height:"80px"},attrs:{src:e.company.logo,load:e.imageOnLoad}},[t("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v(" 加载中"),t("span",{staticClass:"dot"},[e._v("...")])])])],1)]),t("el-main",{staticClass:"main"},[t("router-view")],1)],1)],1)},L=[];let x="http://120.77.25.98:8000/api";f.Z.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers.authorization="Bearer"+t),e}),(e=>Promise.reject(e)));const k=e=>f.Z.get(`${x}/admin/productList`,{params:e}),S=e=>f.Z.post(`${x}/admin/productAdd`,e,{headers:{"Content-Type":"multipart/form-data"}}),P=e=>f.Z.post(`${x}/admin/productDel`,e,{headers:{"Content-Type":"multipart/form-data"}}),V=()=>f.Z.get(`${x}/admin/company`),z=e=>f.Z.post(`${x}/admin/companyUpdate`,e,{header:{"Content-Type":"multipart/form-data"}}),D=e=>f.Z.get(`${x}/admin/brandList`,{params:e}),O=e=>f.Z.post(`${x}/admin/brandUpdate`,e,{"Content-Type":"multipart/form-data"}),U=e=>f.Z.post(`${x}/admin/brandAdd`,e,{headers:{"Content-Type":"multipart/form-data"}}),R=e=>f.Z.post(`${x}/admin/brandDelete`,e,{"Content-Type":"multipart/form-data"}),j=e=>f.Z.get(`${x}/admin/categoryList`,{params:e}),Z=e=>f.Z.post(`${x}/admin/categoryUpdate`,e,{headers:{"Content-Type":"multipart/form-data"}}),I=e=>f.Z.post(`${x}/admin/categoryAdd`,e,{headers:{"Content-Type":"multipart/form-data"}}),T=e=>f.Z.post(`${x}/admin/categoryDel`,e,{headers:{"Content-Type":"multipart/form-data"}});var B={name:"AdminIndex",data(){return{company:{name:"",logo:""}}},methods:{handleMenuSelect(e){this.$router.push(e)},getData(){V().then((e=>{this.company.name=e.data.data[0].name,this.company.logo="http://120.77.25.98:8000/images/"+e.data.data[0].logo}))},imageOnLoad(e){console.log(e)}},mounted(){this.getData()}},E=B,A=(0,c.Z)(E,$,L,!1,null,"bd001208",null),q=A.exports,M=function(){var e=this,t=e._self._c;return t("section",[e._v(" main ")])},G=[],N={},J=N,H=(0,c.Z)(J,M,G,!1,null,"5892d9e8",null),K=H.exports,Q=function(){var e=this,t=e._self._c;return t("section",[t("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[t("el-form",{attrs:{inline:!0,model:e.filters}},[t("el-form-item",[t("el-input",{attrs:{placeholder:"品牌名称"},model:{value:e.filters.brand_name,callback:function(t){e.$set(e.filters,"brand_name",t)},expression:"filters.brand_name"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.searchData}},[e._v("查询")])],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增")])],1)],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.brandList,"highlight-current-row":""},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{prop:"brand_id",label:"品牌ID",width:"140"}}),t("el-table-column",{attrs:{prop:"brand_image",label:"品牌Logo",width:"120"}}),t("el-table-column",{attrs:{prop:"brand_name",label:"品牌名称"}}),t("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"small"},on:{click:function(t){return e.handleEdit(a.index,a.row)}}},[e._v("编辑")]),t("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.handleDel(a.index,a.row)}}},[e._v("删除")])]}}])})],1),t("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper",total:e.data.length,"page-size":e.pageSize,"current-page":e.currentPage,"page-sizes":[10,20,30,40],background:!0},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}}),t("el-dialog",{attrs:{title:"编辑",visible:e.editFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.editFormVisible=t}}},[t("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"80px",rules:e.editFormRules}},[t("el-form-item",{attrs:{label:"品牌名称"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editForm.brand_name,callback:function(t){e.$set(e.editForm,"brand_name",t)},expression:"editForm.brand_name"}})],1),t("el-form-item",{attrs:{label:"品牌图片"}},[t("el-upload",{ref:"files",attrs:{action:"",multiple:!0,"auto-upload":!1,"show-file-list":!0,limit:1,"file-list":e.fileList,"list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-change":e.handleUploadChange,"on-remove":e.handleUploadRemove,"before-upload":e.beforeUpload}},[t("i",{staticClass:"el-icon-plus"})]),t("el-dialog",{attrs:{visible:e.uploadVisible},on:{"update:visible":function(t){e.uploadVisible=t}}},[t("img",{attrs:{width:"100%",src:e.uploadImageUrl,alt:""}})])],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{nativeOn:{click:function(t){e.editFormVisible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary",loading:e.editLoading},nativeOn:{click:function(t){return e.editSubmit("editForm")}}},[e._v("提交")])],1)],1),t("el-dialog",{attrs:{title:"新增",visible:e.addFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.addFormVisible=t}}},[t("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"80px",rules:e.addFormRules}},[t("el-form-item",{attrs:{label:"品牌名称",prop:"brand_name"}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.brand_name,callback:function(t){e.$set(e.addForm,"brand_name",t)},expression:"addForm.brand_name"}})],1),t("el-form-item",[t("el-upload",{ref:"files",attrs:{action:"",multiple:!0,"auto-upload":!1,"show-file-list":!0,limit:1,"file-list":e.fileList,"list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-change":e.handleUploadChange,"on-remove":e.handleUploadRemove,"before-upload":e.beforeUpload}},[t("i",{staticClass:"el-icon-plus"})]),t("el-dialog",{attrs:{visible:e.uploadVisible},on:{"update:visible":function(t){e.uploadVisible=t}}},[t("img",{attrs:{width:"100%",src:e.uploadImageUrl,alt:""}})])],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{nativeOn:{click:function(t){e.addFormVisible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary",loading:e.addLoading},nativeOn:{click:function(t){return e.addSubmit.apply(null,arguments)}}},[e._v("提交")])],1)],1)],1)},W=[],X={name:"BrandList",data(){return{previewUrl:"",formData:{},filters:{brand_name:""},data:[],dataSearch:[],currentPage:1,pageSize:10,listLoading:!1,selectID:"",selectedList:[],fileList:[],uploadVisible:!1,uploadImageUrl:"",editFormVisible:!1,editLoading:!1,editFormRules:{brand_name:[{requrie:!0,message:"请输入品牌名称",trigger:"blur"}]},editForm:{brand_id:"",brand_name:"",image:{}},addFormVisible:!1,addLoading:!1,addForm:{brand_name:"",image:{}},addFormRules:{brand_name:[{requrie:!0,message:"请输入品牌名称",trigger:"blur"}],image:[{requrie:!0,message:"请上传图片",trigger:"blur"}]}}},methods:{searchData(){this.listLoading=!0;let e=[];this.data=this.dataSearch;const t=new RegExp(this.filters.brand_name,"g");e=this.data.filter((e=>t.test(e.brand_name))),this.data=e,this.listLoading=!1},getData(){this.listLoading=!0,D().then((e=>{this.listLoading=!1,0===e.data.errno?(this.data=e.data.data,this.dataSearch=e.data.data):this.$alert("信息加载失败",{confirmButtonText:"确定"})})).catch((e=>{this.listLoading=!1,this.$message({type:"info",message:`${e} 加载失败,请联系管理员!`})}))},handleSelectionChange(e){this.selectedList=e},handleDel(e,t){let a=Object.assign({},t).brand_id;a&&this.$confirm("确认删除该记录吗？","提示",{type:"warning"}).then((()=>{let t=new FormData;t.append("brand_id",a),R(t).then((t=>{0===t.data.errno?(this.brandList.splice(e,1),this.$message.success("删除成功")):(this.$message.error(t.data.message),this.$router.push("/login"))}))})).catch((e=>{this.$message.error(e)})),this.selectID=null},handleEdit(e,t){this.editForm.brand_id=Object.assign({},t).brand_id,this.editForm.brand_name=Object.assign({},t).brand_name,this.editFormVisible=!0},handleAdd(){this.addFormVisible=!0,this.addLoading=!1,this.addForm={brand_name:""},this.fileList=[]},editSubmit(e){this.$refs[e].validate((t=>{t&&this.$confirm("确认提交吗？","提示",{}).then((()=>{this.editLoading=!0;let t=new FormData;t.append("brand_id",this.editForm.brand_id),t.append("brand_name",this.editForm.brand_name),t.append("brand_image",this.fileList[0].raw),O(t).then((t=>{this.editLoading=!1,0===t.data.errno?(this.$message({message:"提交成功",type:"success"}),this.$refs[e].resetFields(),this.fileList=[],this.editFormVisible=!1,this.getData()):this.$router.push("/login")})).catch((e=>{this.$message.error(e)}))}))}))},addSubmit(){this.$refs.addForm.validate((e=>{e&&this.$confirm("确认提交？","提示",{}).then((()=>{this.addLoading=!0;let e=new FormData;e.append("brand_name",this.addForm.brand_name),e.append("brand_image",this.fileList[0].raw),U(e).then((e=>{0===e.data.errno?(this.addLoading=!1,this.$message({message:"提交成功",type:"success"}),this.$refs["addForm"].resetFields(),this.fileList=[],this.addLoading=!1):this.$router.push("/login")}))})).catch((()=>{this.$message({message:"提交失败！",type:"error"}),this.addLoading=!1}))}))},beforeUpload(e){const t="image/jpeg"===e.type,a="image/png"===e.type,i=e.size/1024/1024<2;return t||a?!!i||(this.$message.error("上传图片大小不能超过2MB！"),!1):(this.$message.error("仅支持JPG和PNG格式图片！"),!1)},handleUploadChange(e){this.fileList.push(e)},handleUploadRemove(e){const t=this.fileList.indexOf(e);this.fileList.splice(t,1)},handlePictureCardPreview(e){this.uploadImageUrl=e.url,this.uploadVisible=!0},handleCurrentChange(e){this.currentPage=e},handleSizeChange(e){this.pageSize=e}},mounted(){this.getData()},computed:{brandList(){const e=(this.currentPage-1)*this.pageSize,t=e+this.pageSize;return this.data.slice(e,t)}}},Y=X,ee=(0,c.Z)(Y,Q,W,!1,null,"57357f6b",null),te=ee.exports,ae=function(){var e=this,t=e._self._c;return t("section",[t("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[t("el-form",{attrs:{inline:!0,model:e.filters}},[t("el-form-item",[t("el-input",{attrs:{placeholder:"产品类别名称"},model:{value:e.filters.category_name,callback:function(t){e.$set(e.filters,"category_name",t)},expression:"filters.category_name"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.searchData}},[e._v("查询")])],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增")])],1)],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.category_list,"highlight-current-row":""},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{prop:"category_id",label:"产品类型id",width:"140"}}),t("el-table-column",{attrs:{prop:"category_name",label:"产品类型名称",width:"120"}}),t("el-table-column",{attrs:{prop:"category_image",label:"产品类型图片"}}),t("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"small"},on:{click:function(t){return e.handleEdit(a.index,a.row)}}},[e._v("编辑")]),t("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.handleDel(a.index,a.row)}}},[e._v("删除")])]}}])})],1),t("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper",total:e.data.length,"page-size":e.pageSize,"current-page":e.currentPage,"page-sizes":[10,20,30,40],background:!0},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}}),t("el-dialog",{attrs:{title:"编辑",visible:e.editFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.editFormVisible=t}}},[t("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"80px",rules:e.editFormRules}},[t("el-form-item",{attrs:{label:"id"}},[t("el-input",{attrs:{autocomplete:"off",disabled:!0},model:{value:e.editForm.category_id,callback:function(t){e.$set(e.editForm,"category_id",t)},expression:"editForm.category_id"}})],1),t("el-form-item",{attrs:{label:"品牌名称"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editForm.category_name,callback:function(t){e.$set(e.editForm,"category_name",t)},expression:"editForm.category_name"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{nativeOn:{click:function(t){e.editFormVisible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary",loading:e.editLoading},nativeOn:{click:function(t){return e.editSubmit("editForm")}}},[e._v("提交")])],1)],1),t("el-dialog",{attrs:{title:"新增",visible:e.addFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.addFormVisible=t}}},[t("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"80px",rules:e.addFormRules}},[t("el-form-item",{attrs:{label:"类别名称",prop:"category_name"}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.category_name,callback:function(t){e.$set(e.addForm,"category_name",t)},expression:"addForm.category_name"}})],1),t("el-form-item",[t("el-upload",{ref:"files",attrs:{action:"",multiple:!0,"auto-upload":!1,"show-file-list":!0,limit:1,"file-list":e.fileList,"list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-change":e.handleUploadChange,"on-remove":e.handleUploadRemove,"before-upload":e.beforeUpload}},[t("i",{staticClass:"el-icon-plus"})]),t("el-dialog",{attrs:{visible:e.uploadVisible},on:{"update:visible":function(t){e.uploadVisible=t}}},[t("img",{attrs:{width:"100%",src:e.uploadImageUrl,alt:""}})])],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{nativeOn:{click:function(t){e.addFormVisible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary",loading:e.addFormLoading},nativeOn:{click:function(t){return e.addSubmit("addForm")}}},[e._v("提交")])],1)],1)],1)},ie=[],re={name:"CategoryList",data(){return{data:[],dataSearch:[],fileList:[],filters:{category_name:""},currentPage:1,pageSize:10,listLoading:!1,selectedList:[],editLoading:!1,editFormVisible:!1,editForm:{category_id:"",category_name:""},editFormRules:{category_name:[{requrie:!0,message:"请输入品牌名称",trigger:"blur"}]},addFormLoading:!1,addFormVisible:!1,addForm:{category_id:"",category_name:""},addFormRules:{category_name:[{require:!0,message:"请输入类别名称",trigger:"blur"}]},previewUrl:"",uploadImageUrl:"",uploadVisible:!1}},methods:{searchData(){this.listLoading=!0,this.data=this.dataSearch;let e=[];const t=new RegExp(this.filters.category_name,"g");e=this.data.filter((e=>t.test(e.category_name))),this.data=e,this.listLoading=!1},getData(){this.listLoading=!0,j().then((e=>{0===e.data.errno?(this.data=e.data.data,this.dataSearch=e.data.data,this.listLoading=!1):(this.$message({message:e.data.message,type:"error"}),this.listLoading=!1,this.$router.push("/login"))})).catch((e=>{this.listLoading=!1,this.$message({type:"error",message:`${e} 加载失败，请联系管理员`})}))},handleSelectionChange(e){this.selectedList=e},handleDel(e,t){this.$confirm("确认删除吗","提示",{}).then((()=>{let e=Object.assign({},t).category_id,a=new FormData;a.append("category_id",e),T(a).then((e=>{0===e.data.errno?this.$message({message:"删除成功",type:"success"}):(this.$message({message:"删除失败",type:"error"}),this.$router.push("/login"))})).catch((e=>{this.$message({message:e+"后台请求失败，请联系管理员",type:"error"})}))}))},handleEdit(e,t){this.editFormVisible=!0,this.editForm.category_id=Object.assign({},t).category_id,this.editForm.category_name=Object.assign({},t).category_name},handleAdd(){this.addFormVisible=!0,this.addFormLoading=!1,this.addForm.category_id="",this.addForm.category_name="",this.fileList=[]},editSubmit(e){this.$refs[e].validate((t=>{t&&this.$confirm("确认提交吗？","提示",{}).then((()=>{let t=new FormData;t.append("category_id",this.editForm.category_id),t.append("category_name",this.editForm.category_name),Z(t).then((t=>{0===t.data.errno?(this.$message({message:"提交成功",type:"success"}),this.$refs[e].resetFields(),this.editFormVisible=!1,this.getData()):this.$router.push("/login")})).catch((e=>{this.$message({message:e+"修改失败",type:"error"}),this.editLoading=!1}))}))}))},addSubmit(e){this.$refs[e].validate((t=>{t&&this.$confirm("确认提交吗？","提示",{}).then((()=>{this.addFormLoading=!0;let t=new FormData;t.append("category_name",this.addForm.category_name),t.append("category_image",this.fileList[0].raw),I(t).then((t=>{0===t.data.errno?(this.addFormLoading=!1,this.$message({message:"添加成功",type:"success"}),this.$refs[e].resetFields(),this.fileList=[],this.addFormLoading=!1):this.$router.push("/login")})).catch((e=>{this.$message({message:e+"添加失败",type:"error"}),this.addFormLoading=!1}))}))}))},beforeUpload(e){const t="image/jpeg"===e.type,a="image/png"===e.type,i=e.size/1024/1024<2;return t||a?!!i||(this.$message.error("上传图片大小不能超过2MB！"),!1):(this.$message.error("仅支持JPG和PNG格式图片！"),!1)},handleUploadChange(e){this.fileList.push(e)},handleUploadRemove(e){const t=this.fileList.indexOf(e);this.fileList.splice(t,1)},handlePictureCardPreview(e){this.uploadImageUrl=e.url,this.uploadVisible=!0},handleCurrentChange(e){this.currentPage=e},handleSizeChange(e){this.pageSize=e}},mounted(){this.getData()},computed:{category_list(){const e=(this.currentPage-1)*this.pageSize,t=e+this.pageSize;return this.data.slice(e,t)}}},oe=re,se=(0,c.Z)(oe,ae,ie,!1,null,"f13655dc",null),le=se.exports,ne=function(){var e=this,t=e._self._c;return t("el-form",{ref:"companyForm",staticClass:"company_form",attrs:{model:e.company}},[t("el-form-item",{attrs:{label:"id"}},[t("el-input",{staticClass:"name",attrs:{autocomplete:"off",disabled:!0},model:{value:e.company.id,callback:function(t){e.$set(e.company,"id",t)},expression:"company.id"}})],1),t("el-form-item",{staticClass:"item",attrs:{label:"公司名称"}},[t("el-input",{staticClass:"name",model:{value:e.company.name,callback:function(t){e.$set(e.company,"name",t)},expression:"company.name"}})],1),t("el-form-item",{staticClass:"item",attrs:{label:"公司简介"}},[t("el-input",{staticClass:"description",attrs:{type:"textarea",rows:15,placeholder:"请输入内容"},model:{value:e.company.description,callback:function(t){e.$set(e.company,"description",t)},expression:"company.description"}})],1),t("el-form-item",{staticClass:"item",attrs:{label:"ICP"}},[t("el-input",{staticClass:"name",model:{value:e.company.icp,callback:function(t){e.$set(e.company,"icp",t)},expression:"company.icp"}})],1),t("el-form-item",{staticClass:"item",attrs:{label:"电话"}},[t("el-input",{staticClass:"name",model:{value:e.company.tel,callback:function(t){e.$set(e.company,"tel",t)},expression:"company.tel"}})],1),t("el-form-item",{staticClass:"item",attrs:{label:"地址"}},[t("el-input",{staticClass:"description",attrs:{type:"textarea",rows:4,placeholder:"请输入内容"},model:{value:e.company.address,callback:function(t){e.$set(e.company,"address",t)},expression:"company.address"}})],1),t("el-form-item",{staticClass:"item",attrs:{label:"邮件地址"}},[t("el-input",{staticClass:"name",model:{value:e.company.email,callback:function(t){e.$set(e.company,"email",t)},expression:"company.email"}})],1),t("el-form-item",{staticClass:"item",attrs:{label:"logo"}},[t("el-upload",{ref:"logo",attrs:{action:"",multiple:!1,"auto-upload":!1,"show-file-list":!0,limit:1,"file-list":e.fileList,"list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-change":e.handleChange,"on-remove":e.handleRemove,"before-upload":e.beforeUpload}},[t("i",{staticClass:"el-icon-plus"})]),t("el-dialog",{attrs:{visible:e.uploadVisible},on:{"update:visible":function(t){e.uploadVisible=t}}},[t("img",{attrs:{width:"100%",src:e.uploadImageUrl,alt:""}})])],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("companyForm")}}},[e._v("修改")]),t("el-button",[e._v("取消")])],1)],1)},de=[],me={name:"CompanyDetails",data(){return{logo:{},previewUrl:"",fileList:[],uploadVisible:!1,uploadImageUrl:"",company:{id:"",name:"",description:"",icp:"",tel:"",address:"",email:"",logo:{},thumb_logo:""}}},methods:{onSubmit(e){this.$refs[e].validate((e=>{if(e){let e=new FormData;e.append("id",this.company.id),e.append("name",this.company.name),e.append("description",this.company.description),e.append("icp",this.company.icp),e.append("tel",this.company.tel),e.append("address",this.company.address),e.append("email",this.company.email),this.fileList[0]&&e.append("logo",this.fileList[0].raw),z(e).then((e=>{0===e.data.errno&&this.$message({message:"更新成功",type:"success"})})).catch((e=>{this.$message({message:e+"更新失败",type:"error"})}))}}))},getData(){V().then((e=>{0===e.data.errno&&(this.company.id=e.data.data[0].id,this.company.name=e.data.data[0].name,this.company.description=e.data.data[0].description,this.company.icp=e.data.data[0].icp,this.company.logo=e.data.data[0].logo,this.company.tel=e.data.data[0].tel,this.company.address=e.data.data[0].address,this.company.email=e.data.data[0].email)})).catch((e=>{this.$message({message:e+"获取失败",type:"error"})}))},beforeUpload(e){const t="image/jpeg"===e.type,a="image/png"===e.type,i=e.size/1024/1024<2;return t||a?!!i||(this.$message.error("上传图片大小不能超过2MB！"),!1):(this.$message.error("仅支持JPG和PNG格式图片！"),!1)},handleRemove(e){const t=this.fileList.indexOf(e);this.fileList.splice(t,1)},handleChange(e){this.fileList.push(e)},handlePictureCardPreview(e){this.uploadImageUrl=e.url,this.uploadVisible=!0}},mounted(){this.getData()}},ce=me,pe=(0,c.Z)(ce,ne,de,!1,null,"529c5208",null),ue=pe.exports,he=function(){var e=this,t=e._self._c;return t("section",[t("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[t("el-form",{attrs:{inline:!0,model:e.filters}},[t("el-form-item",[t("el-input",{attrs:{placeholder:"产品名称"},model:{value:e.filters.product_name,callback:function(t){e.$set(e.filters,"product_name",t)},expression:"filters.product_name"}})],1),t("el-form-item",[t("el-dropdown",{attrs:{"split-button":"",type:"primary"},on:{command:e.handleBrandCommand}},[e._v(" "+e._s(e.selectBrand)+" "),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.brand,(function(a,i){return t("el-dropdown-item",{key:i,attrs:{"data-item":e.brand,command:a}},[e._v(" "+e._s(a.brand_name)+" ")])})),1)],1)],1),t("el-form-item",[t("el-dropdown",{attrs:{"split-button":"",type:"primary"},on:{command:e.handleCategoryCommand}},[e._v(" "+e._s(e.selectCategory)+" "),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.category,(function(a,i){return t("el-dropdown-item",{key:i,attrs:{"data-item":e.category,command:a}},[e._v(" "+e._s(a.category_name)+" ")])})),1)],1)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.search.apply(null,arguments)}}},[e._v("查询")])],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增")])],1)],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.productList,"highlight-current-row":""},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{prop:"top",label:"置顶标志",width:"100"}}),t("el-table-column",{attrs:{prop:"product_id",label:"产品id",width:"100"}}),t("el-table-column",{attrs:{prop:"brand_id",label:"品牌id",width:"100"}}),t("el-table-column",{attrs:{prop:"category_id",label:"类型id",width:"100"}}),t("el-table-column",{attrs:{prop:"product_name",label:"产品名称",width:"150"}}),t("el-table-column",{attrs:{prop:"brand_name",label:"品牌名称",width:"150"}}),t("el-table-column",{attrs:{prop:"category_name",label:"类型名称",width:"150"}}),t("el-table-column",{attrs:{prop:"product_desc",label:"产品描述",width:"1000"}}),t("el-table-column",{attrs:{prop:"product_standard",label:"产品标准参数",width:"300"}}),t("el-table-column",{attrs:{prop:"product_model",label:"产品型号",width:"80"}}),t("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"small"},on:{click:function(t){return e.handleEdit(a.index,a.row)}}},[e._v("编辑")]),t("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.handleDel(a.index,a.row)}}},[e._v("删除")])]}}])})],1),t("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper",total:e.data.length,"page-size":e.pageSize,"current-page":e.currentPage,"page-sizes":[10,20,30,40],background:!0},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}}),t("el-dialog",{attrs:{title:"编辑",visible:e.editFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.editFormVisible=t}}},[t("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"80px",rules:e.editFormRules}},[t("el-form-item",{attrs:{label:"product_id"}},[t("el-input",{attrs:{autocomplete:"off",disabled:!0},model:{value:e.editForm.product_id,callback:function(t){e.$set(e.editForm,"product_id",t)},expression:"editForm.product_id"}})],1),t("el-form-item",{attrs:{label:"category_id"}},[t("el-input",{attrs:{autocomplete:"off",disabled:!0},model:{value:e.editForm.category_id,callback:function(t){e.$set(e.editForm,"category_id",t)},expression:"editForm.category_id"}})],1),t("el-form-item",{attrs:{label:"brand_id"}},[t("el-input",{attrs:{autocomplete:"off",disabled:!0},model:{value:e.editForm.brand_id,callback:function(t){e.$set(e.editForm,"brand_id",t)},expression:"editForm.brand_id"}})],1),t("el-form-item",{attrs:{label:"产品名称"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editForm.product_name,callback:function(t){e.$set(e.editForm,"product_name",t)},expression:"editForm.product_name"}})],1),t("el-form-item",{attrs:{label:"品牌"}},[t("el-dropdown",{attrs:{"split-button":"",type:"primary",model:e.brand},on:{command:e.handleBrandCommand}},[t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{model:{value:e.brand.brand_name,callback:function(t){e.$set(e.brand,"brand_name",t)},expression:"brand.brand_name"}})],1)],1)],1),t("el-form-item",{attrs:{label:"产品类型"}},[t("el-dropdown",{attrs:{"split-button":"",type:"primary",model:e.category},on:{command:e.handleCategoryCommand}},[t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{model:{value:e.category.category_name,callback:function(t){e.$set(e.category,"category_name",t)},expression:"category.category_name"}})],1)],1)],1),t("el-form-item",{attrs:{label:"产品描述"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入产品描述",maxlength:"500","show-word-limit":"","auto-complete":"off",rows:20},model:{value:e.editForm.product_desc,callback:function(t){e.$set(e.editForm,"product_desc",t)},expression:"editForm.product_desc"}})],1),t("el-form-item",{attrs:{label:"产品规格"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editForm.product_standard,callback:function(t){e.$set(e.editForm,"product_standard",t)},expression:"editForm.product_standard"}})],1),t("el-form-item",{attrs:{label:"产品型号"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editForm.product_model,callback:function(t){e.$set(e.editForm,"product_model",t)},expression:"editForm.product_model"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{nativeOn:{click:function(t){e.editFormVisible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary",loading:e.editLoading},nativeOn:{click:function(t){return e.editSubmit("editForm")}}},[e._v("提交")])],1)],1),t("el-dialog",{attrs:{title:"新增",visible:e.addFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.addFormVisible=t}}},[t("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"200x",rules:e.addFormRules}},[t("el-form-item",{attrs:{label:"产品名称",prop:"product_name"}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.product_name,callback:function(t){e.$set(e.addForm,"product_name",t)},expression:"addForm.product_name"}})],1),t("el-form-item",{attrs:{label:"品牌"}},[t("el-dropdown",{attrs:{"split-button":"",type:"primary"},on:{command:e.handleBrandCommand}},[e._v(" "+e._s(e.selectBrand)+" "),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.brand,(function(a,i){return t("el-dropdown-item",{key:i,attrs:{"data-item":e.brand,command:a}},[e._v(" "+e._s(a.brand_name)+" ")])})),1)],1)],1),t("el-form-item",{attrs:{label:"产品类型"}},[t("el-dropdown",{attrs:{"split-button":"",type:"primary"},on:{command:e.handleCategoryCommand}},[e._v(" "+e._s(e.selectCategory)+" "),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.category,(function(a,i){return t("el-dropdown-item",{key:i,attrs:{"data-item":e.category,command:a}},[e._v(" "+e._s(a.category_name)+" ")])})),1)],1)],1),t("el-form-item",{attrs:{label:"产品描述",prop:"product_desc"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入产品描述",maxlength:"500","show-word-limit":"","auto-complete":"off",rows:20},model:{value:e.addForm.product_desc,callback:function(t){e.$set(e.addForm,"product_desc",t)},expression:"addForm.product_desc"}})],1),t("el-form-item",{attrs:{label:"产品规格",prop:"product_standard"}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.product_standard,callback:function(t){e.$set(e.addForm,"product_standard",t)},expression:"addForm.product_standard"}})],1),t("el-form-item",{attrs:{label:"产品型号",prop:"product_model"}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.product_model,callback:function(t){e.$set(e.addForm,"product_model",t)},expression:"addForm.product_model"}})],1),t("el-form-item",{attrs:{label:"产品图片"}},[t("el-upload",{ref:"files",attrs:{action:"",multiple:!0,"auto-upload":!1,"show-file-list":!0,limit:6,"file-list":e.fileList,"list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-change":e.handleChange,"on-remove":e.handleRemove,"before-upload":e.beforeUpload}},[t("i",{staticClass:"el-icon-plus"})]),t("el-dialog",{attrs:{visible:e.uploadVisible},on:{"update:visible":function(t){e.uploadVisible=t}}},[t("img",{attrs:{width:"100%",src:e.uploadImageUrl,alt:""}})])],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{nativeOn:{click:function(t){e.addFormVisible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary",loading:e.addFormLoading},nativeOn:{click:function(t){return e.addSubmit.apply(null,arguments)}}},[e._v("提交")])],1)],1)],1)},ge=[],fe={name:"ProductList",data(){return{filters:{product_name:"",brand_id:"",category_id:""},searchResult:[],selectID:"",selectedList:[],selectBrand:"请选择品牌",selectCategory:"请选择产品类型",currentPage:1,pageSize:10,listLoading:!1,selectList:[],data:[],dataSearch:[],images:[],brand:[],category:[],logoUrl:"",previewImgList:[],fileList:[],addFormVisible:!1,addFormLoading:!1,addForm:{top:"",product_id:"",brand_id:"",category_id:"",product_name:"",product_desc:"",product_standard:"",product_model:""},addFormRules:{product_name:[{requrie:!0,message:"请输入产品名称",trigger:"blur"}]},editFormVisible:!1,editFormLoading:!1,editForm:{top:"",product_id:"",brand_id:"",category_id:"",product_name:"",product_desc:"",product_standard:"",product_model:""},editFormRules:{product_name:[{requrie:!0,message:"请输入产品名称",trigger:"blur"}]},uploadVisible:!1,uploadImageUrl:""}},methods:{getData(){return k()},search(){if(this.data=this.dataSearch,this.filters.brand_id&&(this.searchResult=[],this.searchResult=this.data.filter((e=>e.brand_id=this.filters.brand_id)),this.data=this.searchResult),this.filters.category_id&&(this.searchResult=this.data.filter((e=>e.category_id=this.filters.category_id)),this.data=this.searchResult),this.filters.product_name){this.searchResult=[];const e=new RegExp(this.filters.product_name,"g");this.searchResult=this.data.filter((t=>e.test(t.product_name))),this.data=this.searchResult}},handleCurrentChange(e){this.currentPage=e},handleSizeChange(e){this.pageSize=e},handleSelectionChange(e){this.selectList=e},handleAdd(){this.fileList=[],this.addFormVisible=!0},handleEdit(e,t){this.editForm=Object.assign({},t),this.editFormVisible=!0},handleDel(e,t){let a=Object.assign({},t).product_id;a&&this.$confirm("确认删除该记录吗？","提示",{type:"warning"}).then((()=>{let t={product_id:a};P(t).then((t=>{0===t.data.errno&&(this.$message.success("删除成功!"),this.productList.splice(e,1)),this.$message.error("删除失败！"+t.data.message)}))})),this.selectID=null},handleBrandCommand(e){this.addForm.brand_id=e.brand_id,this.editForm.brand_id=e.brand_id,this.selectBrand=e.brand_name,this.filters.brand_id=e.brand_id},handleCategoryCommand(e){this.addForm.category_id=e.category_id,this.editForm.category_id=e.category_id,this.selectCategory=e.category_name,this.filters.category_id=e.category_id},handleRemove(e){const t=this.fileList.indexOf(e);this.fileList.splice(t,1)},handleChange(e){this.fileList.push(e)},handlePictureCardPreview(e){this.uploadImageUrl=e.url,this.uploadVisible=!0},beforeUpload(e){const t="image/png"===e.type||"image/jpg"===e.type||"image/dmg"===e.type;t&&this.$message.error("请选择正确文件格式上传")},addSubmit(){this.$refs.addForm.validate((e=>{e&&this.$confirm("确认提交？","提示",{}).then((()=>{this.addFormLoading=!0;let e=new FormData;e.append("top",this.addForm.top),e.append("product_name",this.addForm.product_name),e.append("brand_id",this.addForm.brand_id),e.append("category_id",this.addForm.category_id),e.append("product_desc",this.addForm.product_desc),e.append("product_model",this.addForm.product_model),e.append("product_standard",this.addForm.product_standard),this.fileList.forEach(((t,a)=>{e.append(`file${a}`,t.raw)})),S(e).then((e=>{0===e.data.errno&&this.$message({message:"更新成功",type:"success"})})).catch((e=>{this.$message({message:"更新失败"+e,type:"error"})}))}))}))},editSubmit(){this.$refs.editForm.validate((e=>{e&&this.$confirm("确认修改","提示",{}).then((()=>{this.editFormLoading=!0;let e=new FormData;e.append("top",this.editForm.top),e.append("product_id",this.editForm.product_id),e.append("product_name",this.editForm.product_name),e.append("brand_id",this.editForm.brand_id),e.append("category_id",this.editForm.category_id),e.append("product_desc",this.editForm.product_desc),e.append("product_model",this.editForm.product_model),e.append("product_standard",this.editForm.product_standard)}))}))}},mounted(){this.getData().then((e=>{0===e.data.errno&&(this.data=e.data.data.product,this.dataSearch=e.data.data.product,this.images=e.data.data.images,this.brand=e.data.data.brand,this.category=e.data.data.category)})).catch((e=>{console.log(e)}))},watch:{filter:{handler(){this.search()}}},computed:{productList(){const e=(this.currentPage-1)*this.pageSize,t=e+this.pageSize;return this.data.slice(e,t)}}},be=fe,_e=(0,c.Z)(be,he,ge,!1,null,"2a41d0fa",null),ye=_e.exports;let ve=[{path:"/login",component:C},{path:"/admin",component:q,children:[{path:"main",component:K},{path:"brand",component:te},{path:"category",component:le},{path:"company",component:ue},{path:"product",component:ye}]}];var Fe=ve,we=a(6891),Ce=a(5214),$e=a.n(Ce);i["default"].use(we.Z,f.Z),i["default"].use(o()),i["default"].use(s.ZP),i["default"].use($e(),{expires:"7d"}),console.log("production");const Le=new s.ZP({mode:"history",routes:Fe});i["default"].config.productionTip=!1,new i["default"]({render:e=>e(u),router:Le}).$mount("#app")}},t={};function a(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={id:i,loaded:!1,exports:{}};return e[i](o,o.exports,a),o.loaded=!0,o.exports}a.m=e,function(){a.amdO={}}(),function(){var e=[];a.O=function(t,i,r,o){if(!i){var s=1/0;for(m=0;m<e.length;m++){i=e[m][0],r=e[m][1],o=e[m][2];for(var l=!0,n=0;n<i.length;n++)(!1&o||s>=o)&&Object.keys(a.O).every((function(e){return a.O[e](i[n])}))?i.splice(n--,1):(l=!1,o<s&&(s=o));if(l){e.splice(m--,1);var d=r();void 0!==d&&(t=d)}}return t}o=o||0;for(var m=e.length;m>0&&e[m-1][2]>o;m--)e[m]=e[m-1];e[m]=[i,r,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var i in t)a.o(t,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,i){var r,o,s=i[0],l=i[1],n=i[2],d=0;if(s.some((function(t){return 0!==e[t]}))){for(r in l)a.o(l,r)&&(a.m[r]=l[r]);if(n)var m=n(a)}for(t&&t(i);d<s.length;d++)o=s[d],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(m)},i=self["webpackChunkrpj_web"]=self["webpackChunkrpj_web"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=a.O(void 0,[998],(function(){return a(4231)}));i=a.O(i)})();
//# sourceMappingURL=app.d660e2d0.js.map